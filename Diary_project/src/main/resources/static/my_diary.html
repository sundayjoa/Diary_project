<!DOCTYPE html>
	<html lang="en">
	    <head>
	        <meta charset="utf-8" />
	        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
	        <meta name="description" content="" />
	        <meta name="author" content="" />
	        <title>별별일기</title>
	        <!-- Favicon-->
	        <link rel="icon" type="image/x-icon" href="assets/star_diary_logo.png" />
	        <!-- Bootstrap icons-->
	        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" type="text/css" />
	        <!-- Google fonts-->
	        <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css" />
	        <!-- Core theme CSS (includes Bootstrap)-->
	        <link href="css/base.css?after" rel="stylesheet" />
	    </head>
	    
	    <body>
	    	<!-- Navigation-->
	        <nav class="navbar navbar-light bg-light static-top custom-navbar">
	        <div class="container">
	            <div class="navbar-menu-group">
	                <a class="navbar-brand" href="index.html">
	                    <img src="assets/star_diary_logo.png" alt="Brand Logo">
	                </a>
	                <a class="navbar-menu" href="#!">
	                    <img src="assets/PublicDiary_font.png">
	                </a>
	                <a class="navbar-menu" href="#!">
	                    <img src="assets/diary_font.png">
	                </a>
	                <a class="navbar-menu" href="#!">
	                    <img src="assets/ExchangDiary_font.png">
	                </a>
	            </div>
	            <div class="ml-auto">
	                <a id="user-info" class="nav-link"></a>
	            </div>
	        </div>
	    </nav>
	    
	    <!-- My diary -->
        <section class="my-diary-section">
        	<div class="my-diary-background container px-4 px-lg-5 my-5">
                <div class="text-center text-white">
                    <h1 class="topic-title fw-bolder">나의 일기장</h1>
                    
                    <div class="public-container">
	                    <div class="rectangle">
				            <h2 class="public-title">제목</h2>
				            <p class="public-content">내용</p>
				            <p class="public-author">작성자</p>
				            <p class="public-dateweather">날짜 날씨</p>
				        </div>
				        
				        <div class="rectangle">
				            <h2 class="public-title">제목</h2>
				            <p class="public-content">내용</p>
				            <p class="public-author">작성자</p>
				            <p class="public-dateweather">날짜 날씨</p>
				        </div>
				        
				        <div class="rectangle">
				            <h2 class="public-title">제목</h2>
				            <p class="public-content">내용</p>
				            <p class="public-author">작성자</p>
				            <p class="public-dateweather">날짜 날씨</p>
				        </div>
				        
				        <div class="rectangle">
				            <h2 class="public-title">제목</h2>
				            <p class="public-content">내용</p>
				            <p class="public-author">작성자</p>
				            <p class="public-dateweather">날짜 날씨</p>
				        </div>
			        </div>
                	
                </div>
            </div>
        </section>
        
        <!-- writing button -->
        <section class="my-button-section">
        	<div class="my-diary-background container px-4 px-lg-5 my-5">
                <div class="text-center text-white">
                    
                    <a class="my-btn" href="#" id="openPopupBtn">일기 쓰러 가기!</a>
                    
                    <!-- 팝업창 -->
			        <div id="popup" class="popup">
			            <div class="popup-content">
			                <span class="close" id="closePopupBtn">&times;</span>
			                <h1 class="my-h1">일기 작성</h1>
			                <a class="rc-topic" id="recommendation-topic">⒤ 일기 주제를 추천해드려요!</a>
			                
			                <!-- 주제 추천 섹션 -->
			                <div id="recommendation-section" class="hidden-section">
			                    <h3>추천 일기 주제</h3>
			                    <p>오늘 하루 중 가장 기억에 남는 순간은 무엇인가요?</p>
			                    <a class="recommendation-btn" href="#" id="rcBtn">주제 추천!</a>
			                </div>
			                
			                
			                <form id="diaryForm">
			                	<p class="my-font-1">제목</p>  
			                    <input type="text" id="diaryTitle" name="title">
			                    <p class="my-font-2">내용</p>  
			                    <textarea id="diaryContent" name="content"></textarea><br><br>
			                    <button type="submit">완료</button>
			                </form>
			            </div>
			         </div>
                </div>
            </div>
        </section>
	    
	    <!-- footer -->
        <footer class="footer-section">
            <div class="my-background footer-container">
            	<p class="text-center text-white">Starry Diary Project<br><br> 개발자: 전효주 </p>
            </div>
        </footer>
	    
	    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script>
	        $(document).ready(function() {
	            console.log("Document ready");
	            $.ajax({
	                type: 'GET',
	                url: '/api/session/userinfo',
	                success: function(response) {
	                    console.log("AJAX success", response);
	                    if (response && response.userID && response.userName) {
	                        $('#user-info').html(response.userName + ' 님');
	                        $('#user-info').attr("href", "#");
	                        $('#user-info').addClass('font-3');
	                    } else {
	                        $('#user-info').html('<a class="login-btn" href="login.html">로그인</a>');
	                    }
	                },
	                error: function(xhr, status, error) {
	                    console.error("AJAX error", status, error);
	                    if (xhr.status === 204) {
	                        $('#user-info').html('<a class="login-btn" href="login.html">로그인</a>');
	                    } else {
	                        $('#user-info').html('<a class="login-btn" href="login.html">로그인</a>');
	                    }
	                }
	            });
	        });
	        
	     	// 추천 주제 섹션
	        document.getElementById('recommendation-topic').onclick = function(event) {
	            event.preventDefault();
	            var section = document.getElementById('recommendation-section');
	            if (section.style.display === 'none' || section.style.display === '') {
	                section.style.display = 'block';
	            } else {
	                section.style.display = 'none';
	            }
	        }
	     
	     	// 팝업 열기 버튼
	        document.getElementById('openPopupBtn').onclick = function(event) {
	            event.preventDefault();
	            document.getElementById('popup').style.display = 'block';
	        }

	        // 팝업 닫기 버튼
	        document.getElementById('closePopupBtn').onclick = function() {
	            document.getElementById('popup').style.display = 'none';
	        }

	        // 폼 제출
	        document.getElementById('diaryForm').onsubmit = function(event) {
	            event.preventDefault();
	            // 여기서 폼 데이터를 처리하거나 서버로 전송할 수 있습니다.
	            alert('일기가 저장되었습니다!');
	            document.getElementById('popup').style.display = 'none';
	        }
	    </script>
    </body>
</html>